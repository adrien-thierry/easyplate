<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: easyplate.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: easyplate.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/*
  Copyright (C) 2016  Adrien THIERRY
  http://seraum.com
  License MIT
*/

/**
 * renderView - The unique method of easyplate :)
 * @method
 * @param  {object} viewObj The view object
 * @param  {element} parent The parent DOM element, could be empty, so return a string
 * @param  {object} dataObj The data that could be mapped to the view : each key is mapped to innerHTML element in viewObj, if dataObj[key] is an object, this object is used in recursivity
 * @param {object} option An object with rendering options
 * @return {string} Return a string of generated html
 */
function renderView(viewObj, parent, dataObj, option)
{
  var once = false;
  // for speed, no need to check if empty or not
  if(!dataObj) dataObj = {};

  // if parent is null or undefined, we stock outerHTML of rendered element in
	var viewString = "";

  for(var v in viewObj)
  {

    // if data is an array
    if(dataObj[v] &amp;&amp; dataObj[v].constructor === Array) viewObj[v].number = dataObj[v].length;

    // number of iterations of this object
    if(viewObj[v].number === undefined) viewObj[v].number = 1;

	  // if no tag, set it to div by default
	  if(!viewObj[v].tag) viewObj[v].tag = "div";

    for(var i = 0; i &lt; viewObj[v].number; i++)
    {
      // create obj with tag value
      var element = document.createElement(viewObj[v].tag);

      // loop on each element
      for(var a in viewObj[v].attribute)
      {
        // set each attribute for element
        element.setAttribute(a, viewObj[v].attribute[a]);
      }

      // if innerHTML, set it
      if(viewObj[v].innerHTML)
      {
        element.innerHTML = viewObj[v].innerHTML;
      }

      // if data is an aray, override innerHTML with data i
      if(dataObj[v] &amp;&amp; dataObj[v].constructor === Array)
      {
        if(typeof dataObj[v][i] == "object")
        {
          once = true;
          renderView(viewObj[v].child, element, dataObj[v][i]);
        }
        else
        {
          if( viewObj[v].tag == "input") element.setAttribute('value', dataObj[v][i]);
          else element.innerHTML = dataObj[v][i];
        }
      }

      // else set data if string, number etc
      else if(dataObj[v] &amp;&amp; typeof dataObj[v] != "object")
      {
        if( viewObj[v].tag == "input") element.setAttribute('value', dataObj[v]);
        else element.innerHTML = dataObj[v];
      }

      // if child, we create childs
      if(!once &amp;&amp; viewObj[v].child)
      {
        // create each child element with parent = current scope element recursively
        if(dataObj[v] &amp;&amp; typeof dataObj[v] == "object") renderView(viewObj[v].child, element, dataObj[v]);
        else renderView(viewObj[v].child, element, dataObj);
      }

      // here append child to parent, you can use insertBefore either etc
      if(parent) parent.appendChild(element);
      else viewString += element.outerHTML;
    }

   }

   // return viewString in all case
   return viewString;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#renderView">renderView</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Mon Aug 29 2016 18:48:58 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
